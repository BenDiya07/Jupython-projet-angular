<div class="card bg-jupython-dark-card h-100 shadow-sm border-secondary-subtle certificate-card">
  <div class="card-body d-flex flex-column p-4">
    
    <div class="d-flex justify-content-between align-items-start mb-3">
      <div>
        <h5 class="card-title text-white fw-bold mb-1">{{ data.courseName }}</h5>
        <p class="card-subtitle text-jupython-orange small mb-0">{{ data.platform }}</p>
      </div>
      <span class="badge rounded-pill px-3 py-2 fw-semibold" [ngClass]="getStatusClass(data.status)">
        {{ getStatusLabel(data.status) }}
      </span>
    </div>

    <div class="mt-auto pt-3 border-top border-secondary border-opacity-25">
      <div class="d-flex justify-content-between align-items-center">
        <span class="text-secondary smaller">
          <i class="bi bi-calendar3 me-1"></i> {{ data.submittedAt | date:'dd/MM/yyyy' }}
        </span>
        
        <div class="btn-group shadow-sm">
          <button class="btn btn-sm btn-jupython-outline-green px-3" 
                  data-bs-toggle="modal" 
                  [attr.data-bs-target]="'#modal' + data.id">
            <i class="bi bi-eye-fill me-1"></i> Voir
          </button>
          <button (click)="onDelete(data.id)" 
                  class="btn btn-sm btn-outline-danger ms-2 rounded border-0">
            <i class="bi bi-trash3"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" 
     [id]="'modal' + data.id" 
     tabindex="-1" 
     [attr.aria-labelledby]="'modalLabel' + data.id" 
     aria-hidden="true">
  <div class="modal-dialog modal-xl modal-dialog-centered">
    <div class="modal-content bg-jupython-dark-card border-secondary shadow-lg">
      <div class="modal-header border-secondary p-3">
        <h5 class="modal-title text-white" [id]="'modalLabel' + data.id">
          <i class="bi bi-file-earmark-pdf text-danger me-2"></i>{{ data.courseName }}
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body p-0 bg-dark overflow-hidden" style="height: 80vh;">
        @if (data.fileUrl) {
          <embed 
            [src]="getSafeUrl(data.fileUrl)" 
            type="application/pdf" 
            width="100%" 
            height="100%" 
            class="pdf-embed" />
        } @else {
          <div class="d-flex flex-column align-items-center justify-content-center h-100 text-muted">
            <i class="bi bi-file-earmark-x fs-1 mb-2"></i>
            <p>Aucun fichier n'est rattaché à ce certificat.</p>
          </div>
        }
      </div>
    </div>
  </div>
</div>